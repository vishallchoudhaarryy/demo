<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link rel="stylesheet" href="style.css" />

    <title>Frontend Mentor | Conference ticket generator</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&display=swap" rel="stylesheet">
  </head>
  <body>
    <!-- Form starts -->
   <div class="body">
     <div class="image1"><img src="pattern-squiggly-line-top.svg" alt=""></div>
     <div class="image2"><img src="pattern-squiggly-line-bottom-desktop.svg" alt=""></div>
     <form>

        <div class="form-container">
          <div class="title">
            <h2>Your Journey to Coding Conf 2025 Starts Here!</h2>
            <p>Secure your spot at next year's biggest coding conference.</p>
          </div>
       <div class="formc">
         <div class="upload-section">
          <label for="upload-section"> Upload Avatar</label>
          <div class="input-section" role="region" aria-label="Avatar upload section">
            <input 
              type="file" 
              id="upload-section" 
              name="upload-section"
              accept="image/jpeg,image/png"
              aria-required="true"
              required
            />
            <p>Upload Avatar Drag and drop or click to upload</p>
          </div>
          <span class="caption">
            Upload your photo (JPG or PNG, max size: 500KB).
          </span>
        </div>
        <div class="name-section">
          <label for="full-name">Full Name</label>
          <div class="name-input">
            <input 
              type="text" 
              name="full-name" 
              id="full-name" 
              placeholder="Enter your full name"
              required 
              aria-required="true"
              minlength="2"
            />
          </div>
        </div>
        <div class="name-section">
          <label for="e-mail">E-mail Address</label>
          <div class="name-input">
            <input
              type="email"
              name="e-mail"
              id="e-mail"
              placeholder="example@email.com"
              required
              aria-required="true"
              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
            />
          </div>
        </div>
        <div class="name-section">
          <label for="GitHub">GitHub Username</label>
          <div class="name-input">
            <input
              type="text"
              name="GitHub"
              id="GitHub"
              placeholder="@yourusername"
              required
              aria-required="true"
              pattern="^@[a-zA-Z0-9-]+"
            />
          </div>
        </div>
        <div class="btn"><button type="submit">Generate My Ticket</button></div>
       </div>
      </form>
    </div>
    <!-- Form ends -->
    <!-- Generated tickets starts -->

    <div class="ticket-page">
      
      <div class="title">
        <h2>
          Congrats, <span id="username"> full Name</span> ! Your ticket is ready.
        </h2>
        <p>
          We've emailed your ticket to <span id="user-email"> Email Address </span> and
          will send updates in the run up to the event.
        </p>
      </div>
      <div class="tic">
          <div class="ticket-border"><img src="pattern-ticket.svg" alt=""></div>
          <div class="ticket">
           <div class="ticket-title">
           <h3>Coding Conf</h3>
             <p class="ticket-subtitle" id="date">Jan 31, 2025 / Austin, TX</p>
          </div>
        </div>
       <div class="ticket-detail">
        <div class="avatar" > <img src="" alt="" id="avatar-in"></div>
        <div class="detail">
          <p id="user-name">nn</p>
          <p id="user-GitHub">nnn</p>
        </div>
      </div>
     </div>
    </div>
   </div>

    <!-- Generated tickets ends -->
    <!-- 
    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge">Frontend Mentor</a>.
      Coded by <a href="#">Your Name Here</a>.
    </div> -->
    <script>
      const form = document.querySelector("form");
      const MAX_FILE_SIZE = 500 * 1024; // 500KB in bytes

      // File input validation
      document.getElementById("upload-section").addEventListener("change", function(e) {
        const file = e.target.files[0];
        if (file) {
          if (file.size > MAX_FILE_SIZE) {
            alert("File size must be less than 500KB");
            this.value = ""; // Clear the file input
            return;
          }
          
          if (!["image/jpeg", "image/png"].includes(file.type)) {
            alert("Only JPG and PNG files are allowed");
            this.value = "";
            return;
          }
        }
      });

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        // Get form values
        const name = document.getElementById("full-name").value.trim();
        const mail = document.getElementById("e-mail").value.trim();
        const git = document.getElementById("GitHub").value.trim();
        const avatar = document.getElementById("upload-section").files[0];

        // Validate inputs
        if (!name || !mail || !git || !avatar) {
          alert("Please fill in all fields and upload an avatar");
          return;
        }

        // Email validation
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailRegex.test(mail)) {
          alert("Please enter a valid email address");
          return;
        }

        // GitHub username validation
        if (!git.startsWith("@")) {
          alert("GitHub username must start with @");
          return;
        }

        // Create object URL for avatar
        const avatarUrl = URL.createObjectURL(avatar);

        // Update ticket information
        document.querySelector("#username").textContent = name;
        document.querySelector("#user-name").textContent = name;
        document.getElementById("user-email").textContent = mail;
        document.getElementById("user-GitHub").textContent = git;
        document.getElementById("avatar-in").src = avatarUrl;

        // Format date nicely
        const eventDate = new Date("2025-01-31");
        const options = { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        };
        document.getElementById("date").textContent = 
          `${eventDate.toLocaleDateString('en-US', options)} / Austin, TX`;

        // Hide form and show ticket
        form.style.display = "none";
        document.querySelector(".ticket-page").style.display = "block";

        // Clean up object URL when done
        window.addEventListener('unload', () => {
          URL.revokeObjectURL(avatarUrl);
        });
      });
    </script>
  </body>
</html>
